import{a as D}from"./chunk-WWYCEHUS.js";import{a as f}from"./chunk-EKGKYJJX.js";import{n as C}from"./chunk-BRY6XSFD.js";import{a as y,b as v,ea as L,ja as _}from"./chunk-TOUJTCCI.js";var b=class E{http=_(C);constructor(){}async addUser(r){try{let t=r;t?.photo instanceof File&&(t.photo=await this.http.fileToBase64(t?.photo));let e=v(y({},t),{id:3}),s={success:!0,data:y({},e)};return s?.success||this.http.throwResponseError(s),s?.data}catch(t){throw t}}async updateUser(r,t){try{let e=!1;console.log(t);let s=this.http.cleanFormValues(t);s?.photo instanceof File&&(s.photo=await this.http.fileToBase64(s?.photo));let l=D.find(c=>c.id===t.role_id),m=v(y({},s),{id:r,role:l}),o={success:!0,data:y({},m)};return o?.success||this.http.throwResponseError(o),o?.data}catch(e){throw e}}async getUsers(r){try{let{page:t=1,size:e=10,sortField:s="id",sortOrder:l="asc",filter:m=""}=r,o=f.filter(u=>{let a=m.toLowerCase();return u.name.toLowerCase().includes(a)||u.email.toLowerCase().includes(a)||u.phone.includes(a)});o.sort((u,a)=>{let n=u[s],i=a[s];return n<i?l==="asc"?-1:1:n>i?l==="asc"?1:-1:0});let c=o.length,d=(t-1)*e,w=d+e,h={success:!0,data:o.slice(d,w),pagination:{page:t,size:e,total:c,totalPages:Math.ceil(c/e)}};return console.log(h),h?.success||this.http.throwResponseError(h),h}catch(t){throw t}}async getManagers(r){try{let{page:t=1,size:e=10,sortField:s="id",sortOrder:l="asc",filter:m="",from_date:o,to_date:c}=r,d=f.filter(n=>{if(n.role_id!==2)return!1;let i=m.toLowerCase(),g=n.name.toLowerCase().includes(i)||n.email.toLowerCase().includes(i)||n.phone.includes(i),p=!0;if(o||c){let F=new Date(n.created_at).getTime();if(o){let U=new Date(o).getTime();F<U&&(p=!1)}if(c){let U=new Date(c).getTime();F>U&&(p=!1)}}return g&&p});d.sort((n,i)=>{let g=n[s],p=i[s];return g<p?l==="asc"?-1:1:g>p?l==="asc"?1:-1:0});let w=d.length,R=(t-1)*e,h=R+e,a={success:!0,data:d.slice(R,h),pagination:{page:t,size:e,total:w,totalPages:Math.ceil(w/e)}};return console.log(a),a?.success||this.http.throwResponseError(a),a}catch(t){throw t}}async deleteUser(r){try{let e={success:!0,data:f.find(s=>s.id===r)};return e?.success||this.http.throwResponseError(e),e?.data}catch(t){throw t}}async getUsersByRole(r){try{let e={success:!0,data:f.filter(s=>s.role_id===r)};return console.log(e),e?.success||this.http.throwResponseError(e),e?.data}catch(t){throw t}}async checkAdminExists(){try{f.find(e=>e.role_id===1)||this.http.throwResponseError({message:"You are not authorised to signup without Administrator permission. Kindly contact admin."});let t={data:{admin_exists:!0},success:!0};return console.log(t),t?.success||this.http.throwResponseError(t),t?.data?.admin_exists}catch(r){throw r}}static \u0275fac=function(t){return new(t||E)};static \u0275prov=L({token:E,factory:E.\u0275fac,providedIn:"root"})};export{b as a};
