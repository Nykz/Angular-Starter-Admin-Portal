import{a as d}from"./chunk-EKGKYJJX.js";import{o as m}from"./chunk-P35S44TO.js";import{Ba as g}from"./chunk-VHJX2WMS.js";import{Ma as h,a as s,ea as a,ia as p,ja as l,za as f}from"./chunk-TOUJTCCI.js";var n=class o{constructor(t){this.platformId=t;this.isBrowser=g(this.platformId)}isBrowser;setStorage(t,e){this.isBrowser&&localStorage.setItem(t,e)}getStorage(t){return this.isBrowser?localStorage.getItem(t):null}removeStorage(t){this.isBrowser&&localStorage.removeItem(t)}clearStorage(){this.isBrowser&&localStorage.clear()}static \u0275fac=function(e){return new(e||o)(p(h))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};var u=class o{profile=f(null);http=l(m);storage=l(n);constructor(){}setProfile(t){this.profile.set(t)}async getProfile(t=!1){try{if(this.profile()&&!t)return this.profile();let e=this.storage.getStorage("admin-portal-app-token-key");console.log(e);let i=d.find(c=>c.id==Number(e));i||this.http.throwResponseError({message:"User profile not found! Please try again."});let r={success:!0,data:s({},i)};return r?.success||this.http.throwResponseError(r),this.setProfile(r?.data),r?.data}catch(e){throw e}}async updateProfile(t){try{let e=!1;t=this.http.cleanFormValues(t),console.log(t),t?.photo instanceof File&&(t.photo=await this.http.fileToBase64(t?.photo));let i=s(s({},this.profile()),t),r={success:!0,data:s({},i)};return r?.success||this.http.throwResponseError(r),this.profile.update(c=>s(s({},c),r?.data)),r?.data}catch(e){throw e}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{n as a,u as b};
