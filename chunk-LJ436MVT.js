import{f as V}from"./chunk-QZTPQHYX.js";import{j as h,s as U}from"./chunk-ED5CQGEH.js";import{Bc as d,Cc as M,Dc as P,Ic as T,Jc as S,Kc as O,Pb as u,Qb as p,Rb as F,Tb as b,Ub as y,Zb as l,_b as r,cb as I,dc as C,ec as v,fd as _,gb as a,mc as E,nc as m,pa as g,qa as f,ub as w,za as x}from"./chunk-TOUJTCCI.js";function D(e,n){e&1&&(l(0,"small"),d(1,"*"),r())}function L(e,n){if(e&1&&(l(0,"label"),d(1),u(2,D,2,0,"small"),r()),e&2){let t=m();a(),P(" ",t.label()," "),a(),p(t.required()?2:-1)}}function N(e,n){if(e&1){let t=C();l(0,"img",9),E("error",function(){let i=g(t).$index,c=m(2);return f(c.resetPreview(i))}),r()}if(e&2){let t=n.$implicit,o=m(2);v("src",t??o.defaultImage,I)}}function q(e,n){if(e&1&&b(0,N,1,1,"img",8,F),e&2){let t=m();y(t.previewUrls())}}function A(e,n){if(e&1){let t=C();l(0,"img",10),E("error",function(){g(t);let i=m();return f(i.setPreviewUrls([i.defaultImage]))}),r()}if(e&2){let t=m();v("src",t.defaultImage,I)}}function j(e,n){if(e&1&&(l(0,"div",7)(1,"small"),d(2),r()()),e&2){let t=m();a(2),M(t.isError())}}function k(e,n){e&1&&(l(0,"small"),d(1,"* File is required"),r())}function R(e,n){e&1&&(l(0,"small"),d(1,"* File size exceeds limit"),r())}function $(e,n){e&1&&(l(0,"small"),d(1,"* Invalid file type"),r())}function B(e,n){e&1&&(l(0,"small"),d(1,"* Invalid file selection"),r())}function G(e,n){if(e&1&&(l(0,"div",7),u(1,k,2,0,"small")(2,R,2,0,"small")(3,$,2,0,"small")(4,B,2,0,"small"),r()),e&2){m();let t=O(10);a(),p(t!=null&&t.hasError("required")?1:t!=null&&t.hasError("maxSize")?2:t!=null&&t.hasError("invalidType")?3:4)}}var z=class e{defaultImage="assets/imgs/default-select-image.png";label=_();required=_(!0);isOnlyImage=_(!1);multiple=_(!1);previewUrls=x(null);isError=x(null);control=_();get controlInput(){let n=this.control();return n instanceof h?n:new h}constructor(){}ngOnInit(){}setPreviewUrls(n){this.previewUrls.set(n)}setIsError(n){this.isError.set(n)}onFileSelected(n){let o=n.target.files;if(!o||o.length===0)return;let i=[],c=[];Array.from(o).forEach(s=>{if(console.log(s),s.size>2*1024*1024){console.log("size error: ",s.size),this.controlInput?.setErrors({maxSize:!0}),this.setIsError("* File size exceeds limit");return}if(this.isOnlyImage()&&!["image/png","image/jpg","image/jpeg"].includes(s.type)){console.log("type error: ",s.type),this.controlInput?.setErrors({invalidType:!0}),this.setIsError("* Invalid file type");return}this.setIsError(null),i.push(s),c.push(URL.createObjectURL(s)),console.log("preview urls: ",c)}),i.length!==0&&(this.controlInput?.setValue(this.multiple()?i:i[0]),this.controlInput?.markAsTouched(),this.setPreviewUrls(c),console.log("final preview urls: ",c))}resetPreview(n){let t=this.previewUrls();t.splice(n,1),this.previewUrls.set([...t])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-file-input"]],inputs:{label:[1,"label"],required:[1,"required"],isOnlyImage:[1,"isOnlyImage"],multiple:[1,"multiple"],control:[1,"control"]},decls:12,vars:6,consts:[["fileInput",""],[1,"file-input-form","form-group"],[1,"file-input","row","py-2"],[1,"col-xl-6","col-sm-6","col-12"],["type","file",1,"form-control",3,"change","multiple"],[1,"col-xl-6","col-sm-6","col-12","text-center"],["alt","Preview",3,"src"],[1,"text-danger"],["alt","Preview",1,"mx-1",3,"src"],["alt","Preview",1,"mx-1",3,"error","src"],["alt","Preview",3,"error","src"]],template:function(t,o){if(t&1){let i=C();l(0,"div",1),u(1,L,3,2,"label"),l(2,"div",2)(3,"div",3)(4,"input",4,0),E("change",function(s){return g(i),f(o.onFileSelected(s))}),r()(),l(6,"div",5),u(7,q,2,0)(8,A,1,1,"img",6),r()()(),u(9,j,3,1,"div",7),T(10),u(11,G,5,1,"div",7)}if(t&2){a(),p(o.label()?1:-1),a(3),v("multiple",o.multiple()),a(3),p(o.previewUrls()?7:8),a(2),p(o.isError()?9:-1),a();let i=S(o.controlInput);a(),p(i!=null&&i.invalid&&(i!=null&&i.touched)?11:-1)}},dependencies:[U,V],styles:[".file-input-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:var(--font-size-medium);font-weight:400}.file-input-form[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{border:1px dashed var(--dark-color);border-radius:5px;align-items:center}.file-input-form[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:10vh;width:10vh}.file-input-form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid lightgray;border-radius:5px;object-fit:contain}"]})};export{z as a};
