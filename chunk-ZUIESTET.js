import{a as d}from"./chunk-EKGKYJJX.js";import{o as m}from"./chunk-P35S44TO.js";import{Ba as g}from"./chunk-VHJX2WMS.js";import{Ma as h,a as s,ea as a,ia as p,ja as l,za as f}from"./chunk-TOUJTCCI.js";var n=class o{constructor(t){this.platformId=t;this.isBrowser=g(this.platformId)}isBrowser;setStorage(t,r){this.isBrowser&&localStorage.setItem(t,r)}getStorage(t){return this.isBrowser?localStorage.getItem(t):null}removeStorage(t){this.isBrowser&&localStorage.removeItem(t)}clearStorage(){this.isBrowser&&localStorage.clear()}static \u0275fac=function(r){return new(r||o)(p(h))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};var u=class o{profile=f(null);http=l(m);storage=l(n);constructor(){}setProfile(t){this.profile.set(t)}async getProfile(t=!1){try{if(this.profile()&&!t)return this.profile();let r=this.storage.getStorage("admin-app-token-key"),i=d.find(c=>c.id===Number(r));i||this.http.throwResponseError({message:"User profile not found! Please try again."});let e={success:!0,data:s({},i)};return e?.success||this.http.throwResponseError(e),this.setProfile(e?.data),e?.data}catch(r){throw r}}async updateProfile(t){try{let r=!1;t=this.http.cleanFormValues(t),console.log(t),t?.photo instanceof File&&(t.photo=await this.http.fileToBase64(t?.photo));let i=s(s({},this.profile()),t),e={success:!0,data:s({},i)};return e?.success||this.http.throwResponseError(e),this.profile.update(c=>s(s({},c),e?.data)),e?.data}catch(r){throw r}}static \u0275fac=function(r){return new(r||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{n as a,u as b};
