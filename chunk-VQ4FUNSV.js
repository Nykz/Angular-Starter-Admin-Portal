import{a as q}from"./chunk-7XYD66GL.js";import{b as S}from"./chunk-FANXGWSZ.js";import{a as x}from"./chunk-I6G6X6ZJ.js";import{a as O}from"./chunk-LJ436MVT.js";import{a as F}from"./chunk-2I56YRRQ.js";import{c as N}from"./chunk-QZTPQHYX.js";import"./chunk-LYWNF2LM.js";import{e as l,h as P,l as D,n as w,q as C,s as E}from"./chunk-ED5CQGEH.js";import"./chunk-EKGKYJJX.js";import{p as y}from"./chunk-P35S44TO.js";import"./chunk-77TY73XB.js";import"./chunk-VHJX2WMS.js";import"./chunk-W4BNGQYG.js";import{Vb as n,Wb as o,Xb as a,Yb as t,bd as v,dc as g,gb as r,ja as s,lc as b,pa as c,qa as f,ub as h,za as d}from"./chunk-TOUJTCCI.js";var A=class u{title="PROFILE";formData=d(null);profile=v(()=>this.profileService.profile());formBuilder=s(C);global=s(y);profileService=s(S);constructor(){}ngOnInit(){this.initForm(),this.getProfileData()}async initForm(){let e=this.formBuilder.group({name:[null,l.required],email:[null,[l.required,l.email]],phone:[null,[l.required,l.minLength(10),l.maxLength(10)]],password:[null,[l.minLength(8)].filter(Boolean)],photo:[null]});this.formData.set(e)}async getProfileData(){try{this.global.showSpinner(),await this.profileService.getProfile(),console.log(this.profile()),this.formData()?.patchValue({name:this.profile()?.name,email:this.profile()?.email,phone:this.profile()?.phone})}catch(e){console.log(e),this.global.showAlert("Error!",e,"OK")}finally{this.global.hideSpinner()}}onSubmit(){if(this.formData()?.invalid){console.log("submit"),this.formData()?.markAllAsTouched();return}this.updateProfile()}async updateProfile(){try{this.global.showSpinner();let e=await this.profileService.updateProfile(this.formData()?.value);console.log(e),this.global.showSuccess("Profile updated successfully",null,5e3,!1,"increasing","toast-top-center")}catch(e){console.log(e),this.global.showAlert("Error!",e,"OK")}finally{this.global.hideSpinner()}}static \u0275fac=function(m){return new(m||u)};static \u0275cmp=h({type:u,selectors:[["app-profile"]],decls:18,vars:17,consts:[[1,"mx-4","my-1","border-0"],[3,"title","subRoute","lastRoute"],[1,"col-md-12","mb-3","mt-1","bg-white","p-4","rounded"],[3,"ngSubmit","formGroup"],[1,"row","g-4","mb-6","mx-4"],[1,"form-group","col-md-12"],["label","PHOTO",3,"control","required"],[1,"col-xl-6","col-sm-6","col-12"],["label","NAME","placeholder","Name","icon","user",3,"required","control"],["label","EMAIL","type","email","placeholder","Email","icon","envelope",3,"required","control"],["label","PHONE","type","number","placeholder","Phone Number","icon","phone",3,"required","control","minlength","maxlength"],["label","NEW PASSWORD","type","text","placeholder","Password","icon","key",3,"required","control","minlength"],[1,"box-footer","mt-4","d-flex","justify-content-center"]],template:function(m,p){if(m&1){let i=g();t(0,"app-spinner"),o(1,"div",0),t(2,"app-content-header",1),o(3,"div",2)(4,"form",3),b("ngSubmit",function(){return c(i),f(p.onSubmit())}),o(5,"div",4)(6,"div",5),t(7,"app-file-input",6),a(),o(8,"div",7),t(9,"app-input-form",8),a(),o(10,"div",7),t(11,"app-input-form",9),a(),o(12,"div",7),t(13,"app-input-form",10),a(),o(14,"div",7),t(15,"app-input-form",11),a(),o(16,"div",12),t(17,"app-submit-button"),a()()()()()}if(m&2){r(2),n("title",p.title)("subRoute",p.title)("lastRoute",!1);let i=p.formData();r(2),n("formGroup",i),r(3),n("control",i.controls.photo)("required",!1),r(2),n("required",!0)("control",i.controls.name),r(2),n("required",!0)("control",i.controls.email),r(2),n("required",!0)("control",i.controls.phone)("minlength",10)("maxlength",10),r(2),n("required",!1)("control",i.controls.password)("minlength",8)}},dependencies:[x,q,E,D,P,w,O,F,N],encapsulation:2})};export{A as ProfileComponent};
