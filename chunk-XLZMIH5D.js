import{a as Ge}from"./chunk-7XYD66GL.js";import{a as Y}from"./chunk-HGUW7CEH.js";import"./chunk-ZUIESTET.js";import{a as Ye}from"./chunk-4PFZU4JO.js";import"./chunk-UXYPHY5G.js";import"./chunk-XNPXWUEO.js";import{a as He}from"./chunk-2I56YRRQ.js";import{a as Ae}from"./chunk-SJDQVZ4T.js";import"./chunk-WWYCEHUS.js";import{c as qe}from"./chunk-QZTPQHYX.js";import"./chunk-FVADJEY4.js";import{c as Ue,q as We}from"./chunk-LYWNF2LM.js";import{a as Re,c as Q,e as w,f as Be,g as I,h as Z,i as J,j as S,l as X,m as $,n as ee,o as Le,p as Ke,q as je,r as ze,s as P}from"./chunk-ED5CQGEH.js";import"./chunk-EKGKYJJX.js";import{o as Ne,p as F}from"./chunk-P35S44TO.js";import"./chunk-77TY73XB.js";import{U as Fe,X as Ie,Y as ke,da as De,ea as Te}from"./chunk-VHJX2WMS.js";import"./chunk-W4BNGQYG.js";import{Ac as N,Bc as f,Cc as ae,Dc as Pe,Ia as we,Ic as Me,Jc as Oe,Kc as G,Lc as U,Nb as O,Nc as Ve,Pb as V,Pc as Ee,Qb as E,Vb as p,Wb as s,Xb as a,Xc as A,Yb as g,_ as pe,ac as Ce,bc as ve,cc as j,da as de,dc as v,ea as ue,ed as W,fa as L,fd as q,gb as c,ha as ge,ja as h,k as B,lc as _,mb as se,nc as m,pa as d,qa as u,ra as oe,rc as ye,rd as H,sa as he,sc as be,ta as fe,tc as xe,ua as _e,ub as C,vb as K,wc as T,xc as z,yc as Se,za as y,zb as x}from"./chunk-TOUJTCCI.js";var et=["determinateSpinner"];function tt(o,t){if(o&1&&(oe(),s(0,"svg",11),g(1,"circle",12),a()),o&2){let i=m();O("viewBox",i._viewBox()),c(),z("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeCircumference()/2,"px")("stroke-width",i._circleStrokeWidth(),"%"),O("r",i._circleRadius())}}var it=new ge("mat-progress-spinner-default-options",{providedIn:"root",factory:nt});function nt(){return{diameter:Qe}}var Qe=100,rt=10,Ze=(()=>{class o{_elementRef=h(we);_noopAnimations;get color(){return this._color||this._defaultColor}set color(i){this._color=i}_color;_defaultColor="primary";_determinateCircle;constructor(){let i=h(it);this._noopAnimations=Ue()&&!!i&&!i._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",i&&(i.color&&(this.color=this._defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(i){this._value=Math.max(0,Math.min(100,i||0))}_value=0;get diameter(){return this._diameter}set diameter(i){this._diameter=i||0}_diameter=Qe;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(i){this._strokeWidth=i||0}_strokeWidth;_circleRadius(){return(this.diameter-rt)/2}_viewBox(){let i=this._circleRadius()*2+this.strokeWidth;return`0 0 ${i} ${i}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,n){if(e&1&&ye(et,5),e&2){let r;be(r=xe())&&(n._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(e,n){e&2&&(O("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",n.mode==="determinate"?n.value:null)("mode",n.mode),N("mat-"+n.color),z("width",n.diameter,"px")("height",n.diameter,"px")("--mat-progress-spinner-size",n.diameter+"px")("--mat-progress-spinner-active-indicator-width",n.diameter+"px"),Se("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate",n.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",H],diameter:[2,"diameter","diameter",H],strokeWidth:[2,"strokeWidth","strokeWidth",H]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,n){if(e&1&&(x(0,tt,2,8,"ng-template",null,0,A),s(2,"div",2,1),oe(),s(4,"svg",3),g(5,"circle",4),a()(),he(),s(6,"div",5)(7,"div",6)(8,"div",7),j(9,8),a(),s(10,"div",9),j(11,8),a(),s(12,"div",10),j(13,8),a()()()),e&2){let r=T(1);c(4),O("viewBox",n._viewBox()),c(),z("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),O("r",n._circleRadius()),c(4),p("ngTemplateOutlet",r),c(2),p("ngTemplateOutlet",r),c(2),p("ngTemplateOutlet",r)}},dependencies:[Te],styles:[`.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return o})();var Je=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=K({type:o});static \u0275inj=L({imports:[We]})}return o})();function at(o,t){o&1&&g(0,"mat-spinner",4),o&2&&p("diameter",50)}function lt(o,t){if(o&1){let i=v();s(0,"button",6),_("click",function(){d(i);let n=m();return u(n.onSubmit())}),f(1,"Sign In"),a()}}var te=class o{formData=y(null);isLogin=y(!1);resetPwd=W();global=h(F);auth=h(Y);constructor(){this.initForm()}setIsLogin(t){this.isLogin.set(t)}initForm(){let t=new J({email:new S(null,{validators:[w.required,w.email]}),password:new S(null,{validators:[w.required,w.minLength(8)]})});this.formData.set(t)}onSubmit(){if(this.formData()?.invalid){this.formData()?.markAllAsTouched();return}console.log(this.formData()?.value),this.login()}login(){this.setIsLogin(!0),this.auth.login((this.formData()?.value.email).toString(),this.formData()?.value.password).then(t=>{console.log(t),t?(this.navigate(),this.setIsLogin(!1),this.formData()?.reset()):(this.setIsLogin(!1),this.global.showAlert("Unauthorized User","You are not an Authorized User! Please try again with proper credentials.","OK",!1))}).catch(t=>{console.log(t),this.setIsLogin(!1),this.global.showAlert("Error",t,"OK")})}navigate(){this.global.navigateByUrl("/app")}resetPassword(){let t=this.formData()?.value.email||"";this.resetPwd.emit(t)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["app-signin"]],outputs:{resetPwd:"resetPwd"},decls:9,vars:2,consts:[[1,"auth-form",3,"formGroup"],["formControlName","email","type","email","placeholder","Email"],["formControlName","password","type","password","placeholder","Password"],["type","button",3,"click"],["color","warn",1,"signin",3,"diameter"],[1,"signin","auth-button"],[1,"signin","auth-button",3,"click"]],template:function(i,e){i&1&&(s(0,"form",0)(1,"h1"),f(2,"Sign in"),a(),g(3,"input",1)(4,"input",2),s(5,"a",3),_("click",function(){return e.resetPassword()}),f(6,"Forgot your password? "),a(),V(7,at,1,1,"mat-spinner",4)(8,lt,2,0,"button",5),a()),i&2&&(p("formGroup",e.formData()),c(7),E(e.isLogin()?7:8))},dependencies:[P,X,Q,I,Z,ee,Le,Je,Ze],styles:["form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;height:100%;text-align:center}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-xxxl);font-weight:800;margin:0 0 4vh}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:var(--primary-light-color);border:none;border-radius:10px;padding:12px 15px;margin:8px 0;width:100%}form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--dark-color);font-size:var(--font-size-medium);text-decoration:none;margin:1.5vh 0;align-self:flex-end}form[_ngcontent-%COMP%]   .signin[_ngcontent-%COMP%]{margin-top:2vh}"]})};var ie=class o{http=h(Ne);constructor(){}async sendResetPasswordOtp(t){try{let i={email:t};return{success:!0}}catch(i){throw i}}async verifyResetPasswordOtp(t,i){try{let e={email:t,otp:i};return{success:!0}}catch(e){throw e}}async resetPassword(t){try{return{success:!0}}catch(i){throw i}}static \u0275fac=function(i){return new(i||o)};static \u0275prov=ue({token:o,factory:o.\u0275fac,providedIn:"root"})};var ct=o=>({"error-input":o});function mt(o,t){if(o&1&&(s(0,"span"),f(1),a()),o&2){let i=m(3);c(),Pe(" ",i.config.separator," ")}}function pt(o,t){if(o&1){let i=v();Ce(0),s(1,"input",5,0),_("paste",function(n){d(i);let r=m(2);return u(r.handlePaste(n))})("keyup",function(n){let r=d(i).index,l=m(2);return u(l.onKeyUp(n,r))})("input",function(n){let r=d(i).index,l=m(2);return u(l.onInput(n,r))})("keydown",function(n){let r=d(i).index,l=m(2);return u(l.onKeyDown(n,r))}),a(),x(3,mt,2,1,"span",6),ve()}if(o&2){let i=t.$implicit,e=t.index,n=t.last,r=m(2);c(),N(U("otp-input ",r.config.inputClass)),p("pattern",r.config.allowNumbersOnly?"\\d*":"")("type",r.inputType)("placeholder",(r.config==null?null:r.config.placeholder)||"")("ngStyle",r.config.inputStyles)("formControl",r.otpForm.controls[i])("id",r.getBoxId(e))("ngClass",Ee(11,ct,(r.config==null?null:r.config.showError)&&(r.formControl==null?null:r.formControl.invalid)&&((r.formControl==null?null:r.formControl.dirty)||(r.formControl==null?null:r.formControl.touched)))),c(2),p("ngIf",r.config.separator&&!n)}}function dt(o,t){if(o&1){let i=v();s(0,"div",2),_("focusin",function(){d(i);let n=m();return u(n.onFocusIn())})("focusout",function(){d(i);let n=m();return u(n.onFocusOut())}),s(1,"div",3),x(2,pt,4,13,"ng-container",4),a()()}if(o&2){let i=m();N(U("ng-otp-input-wrapper wrapper ",i.config.containerClass)),p("id",U("c_",i.componentKey))("ngStyle",i.config.containerStyles),c(2),p("ngForOf",i.controlKeys)}}var b=class{static ifTab(t){return this.ifKey(t,"Tab")}static ifDelete(t){return this.ifKey(t,"Delete;Del")}static ifBackspace(t){return this.ifKey(t,"Backspace")}static ifRightArrow(t){return this.ifKey(t,"ArrowRight;Right")}static ifLeftArrow(t){return this.ifKey(t,"ArrowLeft;Left")}static ifSpacebar(t){return this.ifKey(t,"Spacebar; ")}static ifKey(t,i){return i.split(";").some(n=>n===t.key)}},R=class{static keys(t){return t?Object.keys(t):[]}},me=(()=>{let t=class t{set disabled(e){this.setDisabledState(e)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}get controlKeys(){return R.keys(this.otpForm?.controls)}get formControl(){return this.formCtrl??this.inj?.get(Be)}constructor(e,n){this.document=e,this.inj=n,this.config={length:4},this.onBlur=new B,this.onInputChange=new B,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+new Date().getTime().toString(36),this.destroy$=new B,this.activeFocusCount=0,this.onChange=()=>{},this.onTouched=()=>{},this._isDisabled=!1}ngOnInit(){this.otpForm=new J({});for(let e=0;e<this.config.length;e++)this.otpForm.addControl(this.getControlName(e),new S);this.otpForm.valueChanges.pipe(pe(this.destroy$)).subscribe(e=>{R.keys(this.otpForm.controls).forEach(n=>{var r=this.otpForm.controls[n].value;r&&r.length>1&&(r.length>=this.config.length?this.setValue(r):this.rebuildValue())})})}setDisabledState(e){this._isDisabled=e,this.otpForm&&(e?this.otpForm.disable({emitEvent:!1}):this.otpForm.enable({emitEvent:!1}))}writeValue(e){this.currentVal=this.hasVal(e)?e:null,this.setValue(this.currentVal)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onFocusIn(){this.onTouched(),this.activeFocusCount++}onFocusOut(){setTimeout(()=>{this.activeFocusCount--,this.activeFocusCount===0&&(this.onTouched(),this.onBlur.next())},0)}ngAfterViewInit(){if(!this.config.disableAutoFocus){let e=this.document.getElementById(`c_${this.componentKey}`);if(e){let n=e.getElementsByClassName("otp-input")[0];n&&n.focus&&n.focus()}}}getControlName(e){return`ctrl_${e}`}onKeyDown(e,n){let r=this.getBoxId(n-1),l=this.getBoxId(n);if(b.ifKey(e,"Enter")){let D=this.document.getElementById(l)?.closest("form");if(D){e.preventDefault(),D.dispatchEvent(new Event("submit"));return}}if(b.ifSpacebar(e))return e.preventDefault(),!1;if(b.ifBackspace(e)){e.target.value?this.clearInput(l,n):(this.clearInput(r,n-1),this.setSelected(r)),this.rebuildValue();return}if(b.ifDelete(e)){e.target.value?this.clearInput(l,n):(this.clearInput(r,n-1),this.setSelected(r)),this.rebuildValue();return}}hasVal(e){return e!=null&&e!=null&&(!e?.trim||e.trim()!="")}onInput(e,n){let r=this.hasVal(this.currentVal)?`${this.currentVal}${e.target.value}`:e.target.value;if(this.config.allowNumbersOnly&&!this.validateNumber(r)){e.target.value=null,e.stopPropagation(),e.preventDefault(),this.clearInput(null,n);return}if(this.ifValidKeyCode(null,e.target.value)){let l=this.getBoxId(n+1);this.setSelected(l),this.rebuildValue()}else{e.target.value=null;let l=this.getControlName(n);this.otpForm.controls[l]?.setValue(null),this.rebuildValue()}}onKeyUp(e,n){b.ifTab(e)&&(n-=1);let r=this.getBoxId(n+1),l=this.getBoxId(n-1);if(b.ifRightArrow(e)){e.preventDefault(),this.setSelected(r);return}if(b.ifLeftArrow(e)){e.preventDefault(),this.setSelected(l);return}}validateNumber(e){return e&&/^[0-9]+$/.test(e)}getBoxId(e){return`otp_${e}_${this.componentKey}`}clearInput(e,n){let r=this.getControlName(n);if(this.otpForm.controls[r]?.setValue(null),e){let l=this.document.getElementById(e);l&&l instanceof HTMLInputElement&&(l.value=null)}}setSelected(e){this.focusTo(e);let n=this.document.getElementById(e);n&&n.setSelectionRange&&setTimeout(()=>{n.setSelectionRange(0,1)},0)}ifValidKeyCode(e,n){let r=n??e.key;return this.config?.allowNumbersOnly?this.validateNumber(r):/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/^[a-zA-Z0-9%*_\-@#$!]$/.test(r)&&r.length==1}focusTo(e){let n=this.document.getElementById(e);n&&n.focus()}setValue(e){if(!(this.config.allowNumbersOnly&&isNaN(e))){if(this.otpForm?.reset(),!this.hasVal(e)){this.rebuildValue();return}e=e.toString().replace(/\s/g,""),Array.from(e).forEach((n,r)=>{this.otpForm.get(this.getControlName(r))&&this.otpForm.get(this.getControlName(r)).setValue(n)}),this.config.disableAutoFocus||setTimeout(()=>{let n=this.document.getElementById(`c_${this.componentKey}`);var r=e.length<this.config.length?e.length:this.config.length-1;let l=n.getElementsByClassName("otp-input")[r];l&&l.focus&&setTimeout(()=>{l.focus()},1)},0),this.rebuildValue()}}rebuildValue(){let e=null;R.keys(this.otpForm.controls).forEach(n=>{let r=this.otpForm.controls[n].value;if(r){let l=r.length>1,M=!this.config.allowNumbersOnly&&this.config.letterCase&&(this.config.letterCase.toLocaleLowerCase()=="upper"||this.config.letterCase.toLocaleLowerCase()=="lower");r=r[0];let D=M?this.config.letterCase.toLocaleLowerCase()=="upper"?r.toUpperCase():r.toLowerCase():r;M&&D==r?M=!1:r=D,e==null?e=r:e+=r,(l||M)&&this.otpForm.controls[n].setValue(r)}}),this.currentVal!=e&&(this.currentVal=e,this.onChange(e),this.formCtrl?.setValue&&this.formCtrl.setValue(e),this.onInputChange.next(e))}handlePaste(e){let n=e.clipboardData||window.clipboardData;if(n)var r=n.getData("Text");e.stopPropagation(),e.preventDefault(),!(!r||this.config.allowNumbersOnly&&!this.validateNumber(r))&&this.setValue(r)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(n){return new(n||t)(se(_e),se(fe))},t.\u0275cmp=C({type:t,selectors:[["ng-otp-input"],["ngx-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl",disabled:"disabled"},outputs:{onBlur:"onBlur",onInputChange:"onInputChange"},features:[Ve([{provide:Re,useExisting:de(()=>t),multi:!0}])],decls:1,vars:1,consts:[["inp",""],["tabindex","0",3,"class","id","ngStyle","focusin","focusout",4,"ngIf"],["tabindex","0",3,"focusin","focusout","id","ngStyle"],[1,"n-o-c"],[4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"paste","keyup","input","keydown","pattern","type","placeholder","ngStyle","formControl","id","ngClass"],[4,"ngIf"]],template:function(n,r){n&1&&x(0,dt,3,7,"div",1),n&2&&p("ngIf",r.otpForm==null?null:r.otpForm.controls)},dependencies:[P,Q,I,Ke,$,ke,Ie,De,Fe],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]{margin:0 .51rem}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:first-child{margin-left:0}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:last-child{margin-right:0}.n-o-c[_ngcontent-%COMP%]{display:flex;align-items:center}.error-input[_ngcontent-%COMP%]{border-color:red}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]});let o=t;return o})(),Xe=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=K({type:t}),t.\u0275inj=L({imports:[me]});let o=t;return o})();var ne=class o{config={length:4,allowNumbersOnly:!0,inputClass:"otp-input-style"};otp=W();control=q();get controlInput(){let t=this.control();return t instanceof S?t:new S}constructor(){}ngOnInit(){}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["app-otp-input"]],inputs:{control:[1,"control"]},outputs:{otp:"otp"},decls:1,vars:2,consts:[[3,"formControl","config"]],template:function(i,e){i&1&&g(0,"ng-otp-input",0),i&2&&p("formControl",e.controlInput)("config",e.config)},dependencies:[P,I,$,Xe,me],encapsulation:2})};function gt(o,t){if(o&1&&g(0,"app-input-form",7),o&2){m();let i=G(0);p("control",i.controls.email)}}function ht(o,t){if(o&1&&(s(0,"div",8),g(1,"app-otp-input",11),a()),o&2){m();let i=G(0);c(),p("control",i.controls.otp)}}function ft(o,t){if(o&1&&g(0,"app-input-form",9),o&2){m();let i=G(0);p("control",i.controls.password)("minlength",8)}}var re=class o{resetPasswordForm=y(null);model=y({title:"",subTitle:"",button:"",flag:1});emailVal=q("");formBuilder=h(je);global=h(F);resetPasswordService=h(ie);constructor(){}ngOnInit(){this.initForm(),this.getResetPwdData()}initForm(){let t=this.formBuilder.group({email:[null,[w.required,w.email]],otp:[null],password:[null]});this.resetPasswordForm.set(t)}patchFormData(t){this.resetPasswordForm().patchValue(t)}setModelData(t){this.model.set(t),this.updateValidations()}getFormValue(){return this.resetPasswordForm().value}getResetPwdData(){let t,{email:i,otp:e}=this.getFormValue();!i&&!e?t={title:"Forgot password",subTitle:"Enter your email for the verification process.",button:"SEND OTP",flag:1}:i&&!e?t={title:"Verify your Email",subTitle:"Enter the verification code sent to your email.",button:"VERIFY",flag:2}:t={title:"Reset password",subTitle:"Enter your new password, at least 8 characters long.",button:"SAVE",flag:3},this.setModelData(t)}updateValidations(){let t=this.resetPasswordForm(),i=this.model().flag;t.controls.otp.clearValidators(),t.controls.password.clearValidators(),i===1?t.controls.email.setValidators([w.required,w.email]):i===2?t.controls.otp.setValidators([w.required]):t.controls.password.setValidators([w.required,w.minLength(8)]),Object.values(t.controls).forEach(e=>e.updateValueAndValidity()),this.resetPasswordForm.set(this.formBuilder.group(t.controls))}onOtpChange(t){this.patchFormData({otp:t})}onResetPasswordSubmit(){if(this.resetPasswordForm()?.invalid){this.global.showErrorMessage("Please provide a proper email address","Wrong email!",5e3,!1,"decreasing","toast-bottom-center");return}let t=this.model()?.flag;t===1?this.sendResetPasswordEmailOtp():t===2?this.verifyResetPasswordOtp():this.resetPassword()}async sendResetPasswordEmailOtp(){try{this.global.showSpinner();let t=this.getFormValue()?.email;await this.resetPasswordService.sendResetPasswordOtp(t),this.patchFormData({email:t}),this.getResetPwdData()}catch(t){this.global.showErrorMessage(t,"Error",5e3,!1,"decreasing","toast-bottom-center")}finally{this.global.hideSpinner()}}async verifyResetPasswordOtp(){try{this.global.showSpinner();let t=this.getFormValue();await this.resetPasswordService.verifyResetPasswordOtp(t?.email,t?.otp),this.getResetPwdData()}catch(t){this.global.showErrorMessage(t,"Error",5e3,!1,"decreasing","toast-bottom-center")}finally{this.global.hideSpinner()}}async resetPassword(){try{this.global.showSpinner();let t=this.getFormValue();await this.resetPasswordService.resetPassword(t),this.global.showSuccess("Reset password successfully",null,5e3,!1,"increasing","toast-top-center"),this.global.hideModal()}catch(t){this.global.showErrorMessage(t,"Error",5e3,!1,"decreasing","toast-bottom-center")}finally{this.global.hideSpinner()}}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["app-reset-password"]],inputs:{emailVal:[1,"emailVal"]},decls:15,vars:5,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"row","g-4","pb-4","m-2","mb-4"],[1,"col-xl-12","col-sm-12","col-12"],[1,"col-xl-6","col-sm-6","col-12","offset-xl-3","offset-sm-3"],[1,"mb-4"],[1,"fs-4","fw-bold","mb-2"],[1,"text-muted"],["type","email","icon","envelope","placeholder","Email",3,"control"],[1,"d-flex","justify-content-center"],["type","password","placeholder","Password","icon","key",3,"control","minlength"],[1,"box-footer","mt-4","d-flex","justify-content-center"],[3,"control"]],template:function(i,e){if(i&1){let n=v();Me(0),s(1,"form",0),_("ngSubmit",function(){return d(n),u(e.onResetPasswordSubmit())}),s(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),f(7),a(),s(8,"p",6),f(9),a()(),V(10,gt,1,1,"app-input-form",7)(11,ht,2,1,"div",8)(12,ft,1,2,"app-input-form",9),a(),s(13,"div",10),g(14,"app-submit-button"),a()()()()}if(i&2){let n=Oe(e.resetPasswordForm());c(),p("formGroup",n),c(6),ae(e.model().title),c(2),ae(e.model().subTitle);let r=e.model().flag;c(),E(r===1?10:r===2?11:12)}},dependencies:[P,X,Z,ee,qe,He,ne],encapsulation:2})};function _t(o,t){if(o&1){let i=v();s(0,"button",9),_("click",function(){d(i);let n=m(),r=T(15);return u(n.signupModal(r))}),f(1," Sign Up "),a()}}function wt(o,t){if(o&1){let i=v();s(0,"div",10)(1,"h4",11),f(2,"RESET PASSWORD"),a(),s(3,"button",12),_("click",function(){d(i);let n=m();return u(n.global.hideModal())}),a()(),s(4,"div",13),g(5,"app-reset-password",14),a()}if(o&2){let i=m();c(5),p("emailVal",i.email_value())}}function Ct(o,t){if(o&1){let i=v();s(0,"div",10)(1,"h4",11),f(2,"SIGN UP"),a(),s(3,"button",12),_("click",function(){d(i);let n=m();return u(n.global.hideModal())}),a()(),s(4,"div",13)(5,"app-add-user",15),_("register",function(n){d(i);let r=m();return u(r.onSignupSubmit(n))}),a()()}o&2&&(c(5),p("isSignup",!0))}var $e=class o{type=y(!0);isSignup=y(!0);email_value=y("");global=h(F);auth=h(Y);userService=h(Ae);ngOnInit(){console.log("auth oninit")}setIsSignup(t){this.isSignup.set(t)}async checkAdminExists(t){try{this.global.showSpinner();let i=await this.userService.checkAdminExists();if(console.log("isAdminExists: ",i),this.setIsSignup(!i),!this.isSignup()){this.global.hideSpinner(),this.global.showAlert("Unauthorized Access!","You are not authorised to signup without Administrator permission. Kindly contact admin.","OK",!1);return}this.global.showModal(t)}catch(i){console.log(i)}finally{this.global.hideSpinner()}}changeType(){this.type.set(!this.type())}navigate(){this.global.navigateByUrl("/app")}errorMessage(t){this.global.showErrorMessage(t,"Error!",5e3,!1,"decreasing","toast-bottom-center")}signupModal(t){this.checkAdminExists(t)}async onSignupSubmit(t){try{this.global.showSpinner(),await this.auth.register(t),this.global.hideModal(),this.global.hideSpinner(),this.navigate()}catch(i){this.global.hideSpinner(),this.global.showAlert("Error!",i,"OK")}}resetPassword(t,i){this.email_value.set(t),this.global.showModal(i)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=C({type:o,selectors:[["app-auth"]],decls:16,vars:1,consts:[["resetPasswordTemplate",""],["signupTemplate",""],[1,"row","container"],[1,"col-md-6","left"],[1,"overlay-container","my-1"],["src","assets/imgs/logo.png","alt","logo","height","100","width","100",1,"animation__wobble","mb-4","bg-white","rounded"],["id","signUp",1,"ghost","auth-button"],[1,"col-md-6","right"],[3,"resetPwd"],["id","signUp",1,"ghost","auth-button",3,"click"],[1,"modal-header","d-flex","justify-content-between","align-items-center"],[1,"modal-title","mb-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"emailVal"],[3,"register","isSignup"]],template:function(i,e){if(i&1){let n=v();g(0,"app-spinner"),s(1,"div",2)(2,"div",3)(3,"div",4),g(4,"img",5),s(5,"h1"),f(6,"Welcome, my Friend!"),a(),s(7,"p"),f(8,"Start your journey with our innovative Angular Laravel UI Kit"),a(),V(9,_t,2,0,"button",6),a()(),s(10,"div",7)(11,"app-signin",8),_("resetPwd",function(l){d(n);let M=T(13);return u(e.resetPassword(l,M))}),a()()(),x(12,wt,6,1,"ng-template",null,0,A)(14,Ct,6,1,"ng-template",null,1,A)}i&2&&(c(9),E(e.isSignup()?9:-1))},dependencies:[Ge,ze,te,re,Ye],styles:["@media only screen and (min-width: 960px){.container[_ngcontent-%COMP%]{width:60%}}@media only screen and (min-width: 1440px){.container[_ngcontent-%COMP%]{width:60%}}@media only screen and (min-width: 2000px){.container[_ngcontent-%COMP%]{width:60%}}@media only screen and (max-device-width: 480px){.container[_ngcontent-%COMP%]{width:90%}}@media only screen and (device-width: 768px){.container[_ngcontent-%COMP%]{width:70%}}@media only screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation: portrait){.container[_ngcontent-%COMP%]{width:80%}}@media only screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation: landscape){.container[_ngcontent-%COMP%]{width:80%}}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;margin-left:auto;margin-right:auto;padding:0;transform:translateY(12vh);min-height:70vh}.container[_ngcontent-%COMP%]   button.ghost[_ngcontent-%COMP%]{margin-top:2vh;margin-bottom:2vh;background-color:transparent;border-color:#fff}.container[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]{background:var(--tertiary-color);background:-webkit-linear-gradient(to right,var(--primary-color),var(--primary-color));background:linear-gradient(to right,var(--primary-color),var(--primary-color));background-repeat:no-repeat;background-size:cover;background-position:0 0;color:#fff;border-radius:10px;padding:0 5vh;text-align:center;vertical-align:middle}.container[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]   div.overlay-container[_ngcontent-%COMP%]{height:95%;margin:auto;display:flex;align-items:center;justify-content:center;flex-direction:column;transition:transform .6s ease-in-out}.container[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]   div.overlay-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}.container[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--font-size-medium);font-weight:100;line-height:2vh;letter-spacing:.5px;margin:2vh 0 3vh}.container[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:var(--font-size-small)}"]})};export{$e as AuthComponent};
