import{f as U}from"./chunk-QZTPQHYX.js";import{j as I,s as S}from"./chunk-ED5CQGEH.js";import{Bc as s,Dc as M,Ic as P,Jc as T,Kc as O,Pb as c,Qb as u,Rb as b,Tb as F,Ub as y,Zb as l,_b as r,cb as E,dc as C,ec as v,fd as p,gb as a,mc as x,nc as m,pa as f,qa as g,ub as w,za as h}from"./chunk-TOUJTCCI.js";function L(t,n){t&1&&(l(0,"small"),s(1,"*"),r())}function D(t,n){if(t&1&&(l(0,"label"),s(1),c(2,L,2,0,"small"),r()),t&2){let e=m();a(),M(" ",e.label()," "),a(),u(e.required()?2:-1)}}function z(t,n){if(t&1){let e=C();l(0,"img",9),x("error",function(){let i=f(e).$index,_=m(2);return g(_.resetPreview(i))}),r()}if(t&2){let e=n.$implicit,o=m(2);v("src",e||o.defaultImage,E)}}function N(t,n){if(t&1&&F(0,z,1,1,"img",8,b),t&2){let e=m();y(e.previewUrls())}}function q(t,n){if(t&1){let e=C();l(0,"img",10),x("error",function(){f(e);let i=m();return g(i.setPreviewUrls([i.defaultImage]))}),r()}if(t&2){let e=m();v("src",e.defaultImage,E)}}function A(t,n){t&1&&(l(0,"small"),s(1,"* File is required"),r())}function j(t,n){t&1&&(l(0,"small"),s(1,"* File size exceeds limit"),r())}function k(t,n){t&1&&(l(0,"small"),s(1,"* Invalid file type"),r())}function R(t,n){t&1&&(l(0,"small"),s(1,"* Invalid file selection"),r())}function $(t,n){if(t&1&&(l(0,"div",7),c(1,A,2,0,"small")(2,j,2,0,"small")(3,k,2,0,"small")(4,R,2,0,"small"),r()),t&2){m();let e=O(0);a(),u(e!=null&&e.hasError("required")?1:e!=null&&e.hasError("maxSize")?2:e!=null&&e.hasError("invalidType")?3:4)}}var V=class t{defaultImage="assets/imgs/default-select-image.png";label=p();required=p(!0);isOnlyImage=p(!1);multiple=p(!1);previewUrls=h(null);control=p();get controlInput(){let n=this.control();return n instanceof I?n:new I}constructor(){}ngOnInit(){}setPreviewUrls(n){this.previewUrls.set(n)}onFileSelected(n){let o=n.target.files;if(!o||o.length===0)return;let i=[],_=[];Array.from(o).forEach(d=>{if(d.size>2*1024*1024){this.controlInput?.setErrors({maxSize:!0});return}if(this.isOnlyImage()&&!["image/png","image/jpg","image/jpg"].includes(d.type)){this.controlInput?.setErrors({invalidType:!0});return}i.push(d),_.push(URL.createObjectURL(d))}),i.length!==0&&(this.controlInput?.setValue(this.multiple()?i:i[0]),this.controlInput?.markAsTouched(),this.setPreviewUrls(_))}resetPreview(n){let e=this.previewUrls();e.splice(n,1),this.previewUrls.set([...e])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-file-input"]],inputs:{label:[1,"label"],required:[1,"required"],isOnlyImage:[1,"isOnlyImage"],multiple:[1,"multiple"],control:[1,"control"]},decls:11,vars:5,consts:[["fileInput",""],[1,"file-input-form","form-group"],[1,"file-input","row","py-2"],[1,"col-xl-6","col-sm-6","col-12"],["type","file",1,"form-control",3,"change","multiple"],[1,"col-xl-6","col-sm-6","col-12","text-center"],["alt","Preview",3,"src"],[1,"text-danger"],["alt","Preview",1,"mx-1",3,"src"],["alt","Preview",1,"mx-1",3,"error","src"],["alt","Preview",3,"error","src"]],template:function(e,o){if(e&1){let i=C();P(0),l(1,"div",1),c(2,D,3,2,"label"),l(3,"div",2)(4,"div",3)(5,"input",4,0),x("change",function(d){return f(i),g(o.onFileSelected(d))}),r()(),l(7,"div",5),c(8,N,2,0)(9,q,1,1,"img",6),r()()(),c(10,$,5,1,"div",7)}if(e&2){let i=T(o.controlInput);a(2),u(o.label()?2:-1),a(3),v("multiple",o.multiple()),a(3),u(o.previewUrls()?8:9),a(2),u(i!=null&&i.invalid&&(i!=null&&i.touched)?10:-1)}},dependencies:[S,U],styles:[".file-input-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:var(--font-size-medium);font-weight:400}.file-input-form[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{border:1px dashed var(--dark-color);border-radius:5px;align-items:center}.file-input-form[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:10vh;width:10vh}.file-input-form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid lightgray;border-radius:5px;object-fit:contain}"]})};export{V as a};
