import{a as u,b as m}from"./chunk-ZUIESTET.js";import{a as h}from"./chunk-EKGKYJJX.js";import{o as p}from"./chunk-P35S44TO.js";import{fa as l}from"./chunk-77TY73XB.js";import{ea as c,ja as o,w as n,za as g}from"./chunk-TOUJTCCI.js";var d=class r{router=o(l);storage=o(u);http=o(p);profileService=o(m);token=g(null);constructor(){}updateToken(t){this.token.set(t)}setUserData(t){this.storage.setStorage("admin-app-token-key",t),this.updateToken(t)}getToken(){if(!this.token()){let t=this.storage.getStorage("admin-app-token-key");this.updateToken(t)}}async register(t){try{let e={data:{token:"3",user:t}};return this.setUserData(e?.data?.token),e?.data}catch(e){throw e}}async login(t,e){try{console.log({email:t,password:e});let s=h.find(f=>f.email===t);s||this.http.throwResponseError({message:"Unauthorised Access! No User Found with such Email Address."});let i={data:{token:s.id.toString(),user:s}};return this.setUserData(i?.data?.token),i?.data}catch(a){throw a}}navigateByUrl(t){this.router.navigateByUrl(t,{replaceUrl:!0})}isLoggedIn(){return!!this.storage.getStorage("admin-app-token-key")}async logout(){try{let t=await n(this.http.get("logout"));console.log(t),this.logoutFromDevice()}catch(t){console.log(t),this.logoutFromDevice()}}logoutFromDevice(){this.storage.removeStorage("admin-app-token-key"),this.updateToken(null),this.profileService.setProfile(null),this.router.navigateByUrl("/login",{replaceUrl:!0})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{d as a};
